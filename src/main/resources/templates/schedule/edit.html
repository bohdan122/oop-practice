<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create Schedule</title>
</head>
<body>
    <h1>Create Schedule</h1>
    <form th:action="@{/schedules/edit/{id}(id=${schedule.id})}" th:object="${schedule}" method="post">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" th:field="*{title}" required />
    
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" th:field="*{date}" required />
    
        <label for="director">Director:</label>
        <input type="text" id="director" name="director" th:field="*{director}" required />
    
        <label for="stage">Stage:</label>
        <input type="text" id="stage" name="stage" th:field="*{stage}" required />
    
        <label for="performanceNumber">Performance Number:</label>
        <input type="number" id="performanceNumber" name="performanceNumber" th:field="*{performanceNumber}" required min="1" max="100" />
    
        <button type="submit">Create</button>
    </form>
    <script>
        // Store the token in localStorage after successful login
        function saveToken(token) {
            localStorage.setItem('authToken', token);
        }

        // Get the token from localStorage
        function getToken() {
            return localStorage.getItem('authToken');
        }

        // Set the Authorization header for all outgoing requests
        function setAuthHeader() {
            const token = getToken();
            if (token) {
                fetch('/schedules/edit/{id}', {
                    method: 'GET',
                    headers: {
                        'Authorization': token
                    }
                })
                .then(response => response.json())
                .then(data => console.log(data))
                .catch(error => console.error('Error:', error));
            } else {
                console.log('Token not found');
            }
        }

        // Assuming you have a login form with a POST request
        function onLoginSuccess(token) {
            saveToken(token);
            setAuthHeader();
        }
    </script>
</body>
</html>
